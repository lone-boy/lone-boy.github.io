---
layout: post
title: 软件无线电学习（一）IQ数据类型
-data: 2022-
description: "软件无线电学习"
tag: 软件无线电
typora-root-url: ..
---

## 前言
因为关于关键无线电方面，一般都是使用IQ数据类型来表示信号流数据。因此，这里首先从IQ数据类型上开始入手学习。方便后面使用LIBIIO来写一个扫频软件。

## 为什么用IQ数据
IQ数据是一种比起仅使用信号瞬时幅度到一系列样本更精确，用于信号表示，首先可以看一个简单到信号。

![image-20220712190125232](/images/SDR/image-0.png)

一般来说，使用这种信号是经常使用的，那为什么要使用I/Q数据。

首先，我们无法确定该信号到频率，当然，它看起来很简单，只看周期长度就可以，但是无法知道它是正频率还是负频率，因为它们都生成相同到曲线-例如，cos(x)和cos(-x)。这就会成为处理信号的问题。还有，混合信号（信号相乘），由于符号的不确定性，就会导致多个解：f1 x f2 = f1 + f2 或者 f1 - f2.0，

其次，很难确定信号到功率（峰值幅度，包络）。基本上我们只能在0，180，360看见峰值幅度，那么其他地方到功率是否一样，是否准确地在峰值处对信号进行了采样？这个我们真的无法知道。

但是I/Q数据类型解决来这个问题，我们将信号从二维看成三维，看起来像一个开瓶器。

![image-20220712191239143](/images/SDR/image-1.png)

如果从侧面看条曲线，实际上会得到与上面第一个相同到图。也就是说，上面信号是这个图到投影。这就是I/Q中的I。

![image-20220712191722390](/images/SDR/image-2.png)

如果从上面来看，这看起来很相似，但是它是从0开始，而不是从另一个开始，与相位相差90度。这就是I/Q中到Q。

![image-20220712191912172](/images/SDR/image-3.png)

看开瓶器，如果是逆时针旋转，那么频率是正的。也可能顺时针缠绕，仍然产生相同到I信号但不同的Q信号，代表负频率。同时，开瓶器到半径在每个样本中都是恒定到，如果I小，Q则大，反之亦然。半径就是信号的峰值幅度。因此R = （I^2^+Q^2^)^1/2^，这个就是信号的峰值幅度。

![image-20220712192927995](/images/SDR/image-4.png)

## 什么是I/Q数据

I/Q数据样本是通过开瓶器时间轴看到到信号坐标。

![image-20220712193059959](/images/SDR/image-5.png)

此时信号不是纯余弦函数，尽管如此，信号到每个样本都可以这样描述，即峰值幅度乘以某个相位角的余弦。信号到每个点都可以描述为函数A*cos(theta)，这是只要信号是连续的，A*cos(theta)的值是I/Q信号到I分量，也就是真实到信号。但是这只是在这一个点中描述来你的 信号，下一个样本给你的新的I和Q可能导致另一个幅度或相位角度来反应信号的调制。



## I/Q数据例子

```matlab
I = 0.69
Q = 0.40
```

如果在负数轴上绘画这个图如下：

![image-20220712193848636](/images/SDR/image-6.png)

通过上述数据点我们可以得到什么信息呢？根据定义：

1. 真实信号的瞬时幅度为I，即0.69
2. 毕达哥拉斯函数可以得到余弦波到幅度A为（0.69^2^+0.40^2^)^1/2^ = 0.8
3. 三角函数告诉我们，我们的角度与余弦波的角度为+30度。

因此I=Acos(theta)。最终我们得到`I=0.8*cos(30^0^)

4. I/Q数据是这个余弦函数到表示（数据类型）

I/Q数据是我们上面使用极坐标表示法到矩形表示，两者之间存在独特的转换，不同的符号具有不同到计算属性，选择矩阵形式到I/Q数据是因为常见的硬件操作实现容易些。I/Q数据主要是由I和Q组成，表示为两个单独的变量，一个长度为2向量，也就是复数I + Qi（这里，I是实部）。

![image-20220712195018176](/images/SDR/image-7.png)

注意I是信号当前瞬时幅度（即真实信号）Q是相位-90^0^的瞬时幅度。对于像正弦这样的简单函数，相移是信号在时间上较早到值，但对于具有多个正弦分量的信号，Q反映单个分量到-90^0^偏移，而不是符合信号本身，如果要将实信号转换为I/Q数据信号，需要进行离散傅立叶变换（希尔伯特变换）。







## I/Q数据样本的不同方式

至少有三种方法表示I/Q数据样本。不同的表示会有不同的有点和缺点。有些更容易添加。

常见的形式就是“矩形”形式，因为它可以被看成坐标系中的位置。

- 负数形式：I+Qi
- 向量形式：[I,Q]
- 变量形式，I，Q

**极性形式**

- 幅度和角度

I = 幅度*cos(angle)

Q = 幅度*sin(angle)

**欧拉形式**

由于cos(theta)+i*sin(theta) = e^itheta^，因此可以将IQ样本写成Ae^itheta^



## 总结

基本了解IQ数据类型的相关定义，后面开始学习信号的载波与调制！









