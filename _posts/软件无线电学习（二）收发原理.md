---
layout: post
title: 软件无线电学习（二）收发原理
data: 2022-7-13
description: "软件无线电学习"
tag: 软件无线电
typora-root-url: ..
---

主要介绍一下软件无线电的基本工作原理，方便深入学习sdr设备。这里从u220开始说明。



## 发送框图

![image-20220713110555071](/images/SDR/image-20220713110555071.png)

从基本框图中可以看出，上层物理层以及SDR程序并没有设计到我们目前相关到知识。但是后续也会做。这种SDR就是基于FPGA开发到SDR系统，实时处理能力强，但是开发难度很大，开发成本也高。因为SDR系统中对实时处理能力要求很高，比如说LTE系统，子帧长1，也就是说SDR系统要在1ms把数据全部处理并发送出去，不能有时延。通信系统带宽越大，吞吐率越高，对系统到实时性要求就越高。基于DSP和GPP的SDR系统就不详细介绍了。

关于U220是和USRP B210类似。因此这里介绍它的性能参数。

|              |     USRP     |
| ------------ | :----------: |
|              |     u220     |
| 频带         |  50MHz-6GHz  |
| 带宽         |   61.44MHz   |
| 双工         | FULL 2X2MIMO |
| AD采样位数   |    12bit     |
| AD采样率     |  61.44 Msps  |
| 接口（速度） |    USB3.0    |

### 发射原理

首先是上层模块通过USB3.0把数据传FPGA，然后FPGA通过DAC模块把电脑产生的基带数据上变频到中频。之后数字信号通过DAC转换成模拟域的数据，数模转换之后，需要通过一个低通滤波器让数据变得更加平滑。最后中频模拟域的数据与晶振产生的信号相乘把中频信号调制到指定的射频频点上。

最后射频信号再经过功率放大器把信号发射过去。信号放大器里面也有很多知识可以学习，例如信号放大器分为A类，B类和C类。一般来说，我们可以通过修改信号的发射增益来增强信号的发射。如果设置的太小会导致信号的功率太小，如果设置的过大会导致系统的低噪上升，也有可能会影响其他通信系统的正常工作。



## 接收框图

![image-20220713140439279](/images/SDR/image-20220713140439279.png)

### 接收原理

接收部分的放大器变成了低噪放-低噪声的放大器，本质上也是一个放大器。接收的信号里面包含了信道的噪声，接收机不能把噪声放的过大。信号经过低噪放后与晶振产生的信号相承把信号下变频到中频，同样地经过一个低通滤波器把信号变得平滑。之后中频信号经过ADC把模拟域的信号转到数据域，ADC主要有两个参数，采样精度和采样率。采样精度表示采样后的信号用多少bit来表示，例如这里U220的ADC精度就是12bit。采样率就是采样的速度，这里为61.44Msps，因此大多数SDR LTE系统都采用USRP B系列作为外设，61.44MS/s的采样率刚好是LTE系统最大采样速率30.72M的两倍。

同样的信号经过ADC后，数字信号被送入FPGA模块处理，主要包含两个模块，数字下边频（DDC）和接收控制，DDC就是把信号从中频变频到基带信号。

这里首先经过了两次变频信号，第一次在模拟域的时候通过晶振信号与射频信号相乘下变频到中频，这一次变频主要是为了后面做AD采样，这里注意：**采样需要满足奈奎斯特采样定律，也就是采样的频率必须大于信号的最高频率的两倍**。但是射频信号的载波频率都已经达到了2.6GHz甚至5GHz，因此这个时候需要通过把信号下边频到中频，然后再利用ADC对信号进行模数转换变成数字信号。因为ADC的采样率是61.44MS/s，所以我们可以推出USRP对应的中频频率应该低于30.72MHz，接着中频的数字信号被DDC下变频到基带。

![image-20220713144134726](/images/SDR/image-20220713144134726.png)

这个时候FPGA将基带数据通过USB3.0传送给上位机通过SDR程序处理，物理层处理完后交给上层处理。
